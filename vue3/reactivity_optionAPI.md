# Reactivity

## 반응형 상태 설정

- data 옵션을 사용해 컴포넌트의 반응형 상태를 선언하며, 이 값은 컴포넌트 인스턴스터에서 최상위에 프록시(proxy)되어 노출됨

- data에 포함하지 않고 this에 직접 새 속성을 추가할 수는 있으나, 이런 방식으로 추가된 속성은 이후 반응형 업데이트 동작이 이루어지지 않음

<br />

<details>
  <summary><b>[참고] 컴포지션 API에서의 반응형 상태 설정</b></summary>

- reactive() 함수를 사용해 객체 또는 배열을 반응형으로 만들 수 있음

- 반응형 객체는 JavaScript Proxy이며 일반 객체처럼 작동, 일반 객체와의 차이점은 Vue가 속성에 접근 및 반응형 객체의 변경사항을 감지할 수 있음

- reactive()의 반환 값은 원본 객체와 같지 않고 원본 객체를 재정의한 프록시라는 점을 유의해야 함

</details>

<br /><br />

## 메서드 선언

- methods 옵션으로 컴포넌트에 메서드를 추가

- Vue는 methods에서 this가 컴포넌트 인스턴스를 참조하도록 항상 자동으로 바인딩

- 따라서 메서드가 이벤트 리스너 또는 콜백으로 사용되는 경우에도 this값은 컴포넌트 인스턴스로 유지됨

- 단, 화살표 함수는 Vue가 this를 컴포넌트 인스턴스로 바인딩하는 것을 방지하므로, methods를 정의할 떄 화살표 함수를 사용하는 것은 지양해야 함

- methods도 컴포넌트 템플릿 내에서 접근할 수 있으며, 주로 이벤트 리스너로 사용됨

<br /><br />

## DOM 업데이트 타이밍

- 반응 상태를 변경하면 DOM이 자동으로 업데이트되나, DOM 업데이트는 동기적으로 적용되지 않는 다는 점을 유의해야 함

- Vue는 nextTick()을 사용하여 상태 변경 후 DOM 업데이트가 완료될 때까지 대기할 수 있도록 함

<br /><br />

## 깊은 반응형

- Vue는 반응형 상태를 내부 깊숙이 추적하므로 중첩된 객체나 배열을 변경할 때도 변경 사항이 감지됨

<br /><br />

## 메서드 상태 유지

- 디바운스된 이벤트 핸들러의 경우 일반 methods에 선언할 경우, 해당 함수가 일정 시간이 지나기 전까지 유지되기 때문에 컴포넌트가 재사용될 경우 문제가 발생할 수 있음

- 따라서 각 컴포넌트 인스턴스의 디바운스된 함수를 독립적으로 유지하려면 created 생명주기 훅에서 디바운스된 함수를 호출, unmounted에서 해당 디바운스 핸들러를 취소하는 것이 좋음