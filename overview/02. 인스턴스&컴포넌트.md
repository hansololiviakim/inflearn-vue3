# 02. 인스턴스 & 컴포넌트

## 02-1 뷰 인스턴스

### 뷰 인스턴스의 정의와 속성

#### `인스턴스란?`

- 객체 지향 프로그래밍(OOP)의 중요 개념

- 인스턴스는 클래스라는 설계도를 기반으로 생성된 구체적인 객체(Instance)를 의미

- `클래스`는 객체의 속성(attribute)과 메서드(method)를 정의한 것이며, <br/>
`인스턴스`는 클래스를 기반으로 생성된 실제 객체

<br/>

#### `뷰 인스턴스`

- 뷰로 화면을 개발하기 위해 필수적으로 생성해야 하는 기본 단위

- 뷰 애플리케이션의 핵심 개체이자 최상위 객체로, 뷰를 사용해 개발할 때 생성되는 주요 객체 중 하나 <br/>
  _👉 [참고] 컴포넌트 : 재사용 가능한 UI 조각이며, 각각 자체로 뷰 인스턴스로 구성될 수 있는 단위_

<br/>

#### `뷰 인스턴스의 역할과 특징`

1. 뷰 애플리케이션의 진입점 <br/>
	👉 뷰 애플리케이션을 시작하려면 적어도 하나 이상의 뷰 인스턴스를 생성해야 함

2. 데이터와 메서드를 포함

3. 라이프사이클 훅 제공

4. 가상 DOM 관리

5. 템플릿과 뷰 연결

<br/>

#### `뷰 인스턴스 생성`
    
```javascript
new Vue({
    // 데이터 및 옵션 설정
})
```

- new Vue()로 인스턴스를 생성할 때 Vue를 생성자라고 함

<br/>

<details>
  <summary><b>[참고] 생성자</b></summary>

- 객체를 새로 생성할 떄 자주 사용하는 옵션과 기능들을 미리 특정 객체에 저장해 놓고, 새로 객체를 생성할 떄 기존에 포함된 기능과 더불어 기존 기능을 쉽게 확장해 사용하는 기법

- 주로 객체 지향 프로그래밍에서 사용하는 객체 정의 방식

- 미리 정의된 속성과 메서드를 재활용하기 위해 사용

</details>
        
<br/>

### 뷰 인스턴스 옵션 속성

<table>
	<thead>
		<tr>
			<th>속성</th>
			<th>설명</th>
		</tr>
	</thead>
	<tbody align="center">
		<tr>
			<td>el</td>
			<td>
				＊ 뷰 인스턴스가 마운트될 HTML 요소 지정 <i>(뷰 화면이 그려지는 시작점)</i> <br/>
				＊ 뷰 인스턴스가 HTML에 연결되면 해당 요소 내의 내용을 vue.js가 제어
			</td>
		</tr>
		<tr>
			<td>data</td>
			<td>
				＊ 뷰 인스턴스에서 사용할 데이터 정의 <br/>
				＊ 뷰 인스턴스의 상태를 나타내는 변수들을 포함할 수 있으며, 이 변수들은 뷰 템플릿에서 사용 가능
			</td>
		</tr>
		<tr>
			<td>template</td>
			<td>
				＊ 화면에 표시할 HTML, CSS 등의 마크업 요소를 정의하는 속성 <br/>
				＊ 뷰의 데이터 및 기타 속성들도 함게 화면에 그릴 수 있음
			</td>
		</tr>
		<tr>
			<td>methods</td>
			<td>
				＊ 화면 로직 제어와 관계된 메서드를 정의하는 속성 <br/>
				＊ 화면의 전반적인 이벤트와 화면 동작과 관련된 로직 추가 가능
			</td>
		</tr>
		<tr>
			<td>created</td>
			<td>
				＊ 뷰 인스턴스가 생성되자마자 실행할 로직을 정의할 수 있는 속성
			</td>
		</tr>
	</tbody>
</table>

<br/>

### 뷰 인스턴스의 유효 범위

- 뷰 인스턴스를 생성하면 HTML의 특정 범위 안에서만 옵션 속성들이 적용되어 나타남 <br/>
    → 이를 인스턴스의 유효 범위라고 함

<br/>

```html
<html>
	<head>
		<title>Vue Sample</title>
	</head>
	<body>
		<div id="app">
			{{ message }}
		</div>
		<script src="https://cdn.jsdelovr.net/npm/vue@2.5.2/dist/vue.js"></script>
		<script>
			new Vue({
				el: '#app',
				data: {
					message: 'Hello, Vue.js!'
				}
			});
		</script>
	</body>
</html>
```

1. 뷰 라이브러리 파일 로딩

2. 인스턴스 객체 생성 (옵션 속성 포함)
	- 자바스크립트 코드 상에서 인스턴스 옵션 속성과 el, data를 인스턴스에 정의
	- new Vue()로 인스턴스 생성

3. 특정 화면 요소에 인스턴스를 붙임
	- 브라우저에서 샘플 코드 실행 시 el 속성에 지정한 화면 요소(돔)에 인스턴스 부착

4. 인스턴스 내용이 화면 요소로 변환
	- 인스턴스에 정의한 data 속성(옵션 객체의 내용)이 el 속성에 지정한 화면 요소와 그 이하 레벨의 화면 요소에 적용되어 값이 치환됨

5. 변환된 화면 요소를 사용자가 최종 확인
    
<br/>

### 뷰 인스턴스 라이프 사이클

- **라이프 사이클** : 일반적으로 애플리케이션이 가지는 생명 주기 <br/>
	👉 생성 → 부착 → 갱신 → 소멸의 4단계로 이루어짐

- **라이프 사이클 속성** : 인스턴스의 상태에 따라 호출할 수 있는 속성들

- **라이프 사이클 훅** : 각 라이프 사이클 속성에서 실행되는 커스텀 로직

<br/>

1. `beforeCreate`

	- 인스턴스가 생성되고 나서 가장 처음으로 실행되는 라이프 사이클 단계
	
	- data 속성과 method 속성이 아직 인스턴스어 정의되어 있지 않음
	
	- 돔과 같은 화면 요소에도 접근할 수 없음

2. `created`

	- data 속성과 methods 속성이 정의됨
	
	- 따라서 this.data 또는 this.fetchData()와 같은 로직들을 이용해 data 속성과 methods 속성에 정의된 값에 접근해 로직 수행 가능
	
	- 다만 아직 인스턴스가 화면 요소에 부착되기 전이므로 template 속성에 정의된 돔 요소로 접근할 수 없음
	
	- 서버에 데이터를 요청하여 받아오는 로직을 수행하기 좋음

3. `beforeMount`

	- created 단계 이후 template 속성에 지정한 마크업 속성을 render() 함수로 변환한 후, <br/>
		el 속성에 지정한 화면 요소(DOM)에 인스턴스를 부착하기 전에 호출되는 단계

	- render() 함수가 호출되기 직전의 로직을 추가하기 좋음

4. `mounted`

	- el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 호출되는 단계

	- template 속성에 정의한 화면 요소에 접근할 수 있어 화면 요소를 제어하는 로직을 수행하기 좋음

	- 다만 돔에 인스턴스가 부착하자마자 바로 호출되므로 하위 컴포넌트나 외부 라이브러리에 의해 추가된 화면 요소들이 최종 HTML 코드로 변환되는 시점과 다를 수 있음

5. `beforeUpdate`

	- el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나면 인스턴스에 정의한 속성들이 화면에 치환됨

	- 치환된 값은 뷰의 반응성을 제공하기 위해 **$watch** 속성으로 감시하며, 이를 **데이터 관찰**이라고 함

	- 관찰하고 있는 데이터가 변경되면 가상 돔으로 화면을 다시 그리기 전에 호출되는 단계

	- 변경 예정 데이터의 값과 관련된 로직을 미리 넣을 수 있으나, 화면이 다시 그려지지는 않음

6. `updated`

	- 데이터가 변경된 후 가상 돔으로 다시 화면을 그리고 나면 실행되는 단계

	- 데이터 변경 후 화면 요소 제어와 관련된 로직을 추가하기 좋음

	- 이 단계에서 데이터 값 변경 시 무한 루프에 빠질 수 있으므로 `computed`, `watch`와 같은 속성 사용해야 함

7. `beforeDestory`

	- 뷰 인스턴스가 파괴되기 직전에 호출되는 단계

	- 뷰 인스턴스의 데이터를 삭제하기 좋음

8. `destroyed`

	- 뷰 인스턴스가 파괴된 후 호출되는 단계

	- 뷰 인스턴스에 정의한 모든 속성의 제거되고 하위에 선언한 인스턴스들 또한 모두 파괴

<br/><br/>